# TestWasmerJS - POC WasmerJS + Github Pages

[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![GitHub Pages](https://img.shields.io/badge/GitHub%20Pages-Live-blue.svg)](https://nnosal.github.io/testwasmerjs/)

POC tr√®s rapide d√©montrant l'ex√©cution de modules Wasm dans le navigateur via Wasmer-JS SDK, sans backend ni build complexe.

## A Propos

1. Le projet utilise "[wasmer](https://github.com/wasmerio/wasmer)", qui dispose d'un registre de wasm pr√™t √† l'emploi (https://wasmer.io/products/registry).
2. J'utilise la partie SDK JS: https://docs.wasmer.io/sdk/wasmer-js qui est la plus int√©r√©ssante car on peux la packager dans n'importe quel page html, m√™me sur github pages.
3. J'ai configur√© vite mais il n'est pas n√©cessaire, l'id√©e est de montrer simplement qu'il n'y pas besoin de compilation moderne (typescript, webpack, etc) ni de d√©ploiement sp√©cifique pour utiliser du WASM. 

## Pourquoi?

Cela fait pr√®s de 10 ans que le [WASM](https://en.wikipedia.org/wiki/WebAssembly) est en cours de d√©veloppement, mais ce n'est que r√©cemment que nous avons des applications plus matures pour √™tre utiliser dans les navigateurs web. Son usage viendra compl√©ter la containerisation qui succ√®de √† la virtualisation. Offrant dans le futur d'avantage de facilit√© pour pr√©visualiser dans son navigateur une maquette, une snapshot, ou m√™me dispos√© d'une interface de gestion d√©coupl√©e directement depuis le d√©pot Github (d'o√π ce POC).

## üß© D√©mos disponibles

| Demo | Statut | Lien Wasmer |
| --- | --- | --- |
| PHP | ‚úÖ Fonctionnel | [wasmer.io/php/php](https://wasmer.io/php/php) |
| Python | ‚úÖ Fonctionnel | [wasmer.io/python/python](https://wasmer.io/python/python) |
| WordPress | ‚ö†Ô∏è Limit√© | [wasmer.io/wasmer-examples/php-wasmer-starter](https://wasmer.io/wasmer-examples/php-wasmer-starter) |

## üåü Fonctionnalit√©s cl√©s

- üöÄ **Z√©ro configuration / compilation** - Fonctionne avec du HTML/JS pur.
- üì¶ **D√©pendances incluses** - Wasmer-JS embarqu√© localement.
- üî• **3 d√©mos int√©gr√©es** :
  - PHP (via WASM)
  - Python (via WASM)
  - WordPress (limit√© par la configuration r√©seau)
- üåê **Testable imm√©diatement (via GitHub Pages)** - gr√¢ce √† "Github Actions" + le workaround "[coi-serviceworker](https://github.com/gzuidhof/coi-serviceworker)" afin de permettre la compliance CORS n√©cessaire pour executer Wasmer.

## üõ† Test: d√©veloppement (optionnel)

> Utilise [bun.sh](https://bun.sh) pour remplacer npm et [mise.jdx.dev](https://mise.jdx.dev/) pour setup l'environement.

0. Installer les outils et d√©pendances Node : `mise install && mise r install`
1. Avec Vite (recommand√©) : `mise r vite`
2. Avec Caddy (alternative): `mise r caddy`
3. ( Exemple dist-build sans rollup: `bun run build` )

### üöÄ Test: Production

Le projet est pr√©-configur√© pour GitHub Pages. Un workflow s'occupe d'installer les d√©pendances et publier le rendu statique : [https://github.com/nnosal/testwasmerjs](https://github.com/nnosal/testwasmerjs)

## ‚ö†Ô∏è Limitations connues

1. **WordPress**¬†n√©cessite l'option¬†`--net`¬†qui n'est pas encore disponible dans Wasmer-JS ([issue #4406](https://github.com/wasmerio/wasmer/issues/4406)). 
   - Pour tester WordPress en local, il faut encore utiliser la CLI Wasmer : `wasmer run wasmer-examples/php-wasmer-starter --net`.
2. La version CDN via unpkg "[https://unpkg.com/@wasmer/sdk@0.9.0/dist/index.mjs](https://unpkg.com/@wasmer/sdk@0.9.0/dist/index.mjs)" peut causer des timeouts Cloudflare d'o√π l'import via npm.
3. Test√© non fonctionnel sur Firefox de mon c√¥t√©, tout les moteurs Webkit sont OK.

## Allez plus loin?
1. "[container2wasm/container2wasm](https://github.com/container2wasm/container2wasm)" : Convertir des containeurs sous format WASM.
2. "[soyuka/php-wasm](https://github.com/soyuka/php-wasm)": Compiler via docker son propre WASM pour PHP, voir son int√©gration r√©ussie dans la doc de PHP: [php/web-php/pull/1097](https://github.com/php/web-php/pull/1097) ou bien son usage avanc√© sur [seanmorris/php-wasm](https://github.com/seanmorris/php-wasm).
3. Pour la compilation en WASM: 
   1. Multi: "[WebAssembly/binaryen](https://github.com/WebAssembly/binaryen)": dispose de multiples outils dans divers langages.
   2. C: "[emscripten-core/emscripten](https://github.com/emscripten-core/emscripten)", voir par exemple [sql.js](https://github.com/sql-js/sql.js).
   3. .NET: "[dev-wasm/dev-wasm-dotnet](https://github.com/dev-wasm/dev-wasm-dotnet)"
   4. Python "[RustPython/RustPython](https://github.com/RustPython/RustPython)", voir la [demo web](https://rustpython.github.io/demo/).
   5. Go: "[tinygo-org/tinygo](https://github.com/tinygo-org/tinygo)", voir aussi "[maxence-charriere/go-app](https://github.com/maxence-charriere/go-app)".
   6. Rust: "[rustwasm/wasm-pack](https://github.com/rustwasm/wasm-pack)" ou ["yewstack/yew"](https://github.com/yewstack/yew)
   7. Flutter, il suffit de faire `flutter build web --wasm` mais beaucoup de module ne le supporte pas.
   8. Plus? provenant de wasm3: [Cookbook.md](https://github.com/wasm3/wasm3/blob/main/docs/Cookbook.md) ou bien les d√©mos : [Demos.md](https://github.com/wasm3/wasm3/blob/main/docs/Demos.md)
4. Wordpress: 
   1. Le WASM officiel ["WordPress/wordpress-playground"](https://github.com/WordPress/wordpress-playground) qui marche avec des [blueprint](https://github.com/ProgressPlanner/blueprint-builder).
   2. Exemple de mise √† jour via PR: "[wp-wasm-deploy-preview-example](https://github.com/fabiankaegy/wp-wasm-deploy-preview-example)"
5. D'autres choses utiles: [brendandburns/caddy-wasm](https://github.com/brendandburns/caddy-wasm) : Un plugin pour caddy-wasm ou bien "[wasmerio/winterjs](https://github.com/wasmerio/winterjs)" un serveur JS optimis√© pour WASM, c'est le moteur de d√©ploiement "edge" de wasmer, √† tester s'il peux packager des app <u>Nodejs</u> ?

## üìú Licence

MIT License - Nicolas NOSAL - 2025


